<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
    <!-- extend project explorer -->
    <extension
          point="org.eclipse.ui.navigator.viewer">
      <viewerContentBinding
          viewerId="org.eclipse.ui.navigator.ProjectExplorer">
          <includes>
            <contentExtension
                  pattern="org.everit.e4.eosgi.plugin.ui.navigator">
            </contentExtension>
          </includes>
      </viewerContentBinding>
    </extension>
    
    <!-- define content provider for eosgi IProject -->
    <extension
          id="org.everit.e4.eosgi.plugin.ui.navigator"
          point="org.eclipse.ui.navigator.navigatorContent">
         <navigatorContent
            id="org.everit.e4.eosgi.plugin.ui.navigator"
            name="EosgiNavigatorContent"
            activeByDefault="true"
            icon="icons/everit.gif"
            priority="normal"
            contentProvider="org.everit.e4.eosgi.plugin.ui.navigator.EosgiEnvironmentContentProvider"
            labelProvider="org.everit.e4.eosgi.plugin.ui.navigator.EosgiEnvironmentLabelProvider">
          <triggerPoints>
                 <or>
                    <and>
                       <instanceof
                             value="org.eclipse.core.resources.IProject">
                       </instanceof>
                    </and>
                    <instanceof
                          value="org.everit.e4.eosgi.plugin.ui.navigator.model.EosgiNode">
                    </instanceof>
                 </or>
            </triggerPoints>
            <possibleChildren>
                 <or>
                    <instanceof
                          value="org.everit.e4.eosgi.plugin.ui.navigator.model.EosgiNode">
                    </instanceof>
                 </or>
            </possibleChildren>
        </navigatorContent>
    </extension>

    <!--m2e staffs -->   
    <extension
        point="org.eclipse.m2e.core.projectConfigurators">
        <configurator
            class="org.everit.e4.eosgi.plugin.m2e.EosgiProjectConfigurator"
            id="org.everit.e4.eosgi.plugin.m2e.eosgiProjectConfigurator"
            name="eosgiConfigurator">
        </configurator>
    </extension>
    
    <extension
        point="org.eclipse.m2e.core.lifecycleMappingMetadataSource">
    </extension>
    
    <extension
      point="org.eclipse.ui.menus"
      id="org.everit.e4.eosgi.plugin.ui.menus"
      name="eosgiMenus">
      <menuContribution
        locationURI="popup:org.eclipse.ui.popup.any"
        allPopups="false">
        <menu
          id="org.everit.e4.eosgi.plugin.ui.menus.eosgi"
          label="EOSGI Dist">
          <command
            commandId="org.everit.e4.eosgi.plugin.ui.command.start"
            label="Start">
          </command>
          <command
            commandId="org.everit.e4.eosgi.plugin.ui.command.stop"
            label="Stop">
          </command>
        </menu>
      </menuContribution>
    </extension>

    <extension
      id="org.everit.e4.eosgi.plugin.ui.command"
      point="org.eclipse.ui.commands">
      <command
        id="org.everit.e4.eosgi.plugin.ui.command.start"
        name="startCommand"
        defaultHandler="org.everit.e4.eosgi.plugin.ui.command.StartDistHandler">
      </command>
      <command
        id="org.everit.e4.eosgi.plugin.ui.command.stop"
        name="startCommand"
        defaultHandler="org.everit.e4.eosgi.plugin.ui.command.StopDistHandler">
      </command>
    </extension>
    
    <extension
      point="org.eclipse.ui.handlers">
      <handler
        commandId="org.everit.e4.eosgi.plugin.ui.command.start"
        class="org.everit.e4.eosgi.plugin.ui.command.StartHandler">
        <activeWhen>
          <and>
            <instanceof
              value="org.eclipse.core.resources.IProject">
            </instanceof>
          </and>
        </activeWhen>
      </handler>
    </extension>
    
    <!-- reusable definitions -->
    <!--
    <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
        id="org.eclipse.ui.examples.contributions.inGlobalActionSet">
      </definition>
    </extension>
    -->
    
    <!--
    <extension
      point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
        id="org.everit.e4.eosgi.plugin.propertyTester"
        type=""
        namespace="org.everit.e4.eosgi.plugin.properties"
        properties="property
        class="org.everit.e4.eosgi.plugin.ui.command.ExamplePropertyTester">
      </propertyTester>
    </extension>
    -->
</plugin>
